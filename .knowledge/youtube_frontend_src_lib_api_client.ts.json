{"is_source_file": true, "format": "TypeScript", "description": "This file provides API client functions for interacting with video-related backend services or mock data. It includes functions for listing videos, retrieving a video by ID, searching videos, listing by category or channel, getting recommendations, and creating a new video.", "external_files": ["@/lib/types", "@/lib/mock"], "external_methods": ["mock.listVideos", "mock.getVideoById", "mock.searchVideos", "mock.listByCategory", "mock.listByChannel", "mock.listRecommendations", "mock.createVideo"], "published": ["listVideos", "getVideoById", "searchVideos", "listByCategory", "listByChannel", "listRecommendations", "createVideo"], "classes": [], "methods": [{"name": "function env(name: string): string { env", "description": "Retrieves environment variable by name, returns an empty string if undefined.", "scope": "", "scopeKind": ""}, {"name": "function log(level: \"debug\" | \"info\" | \"warn\" | \"error\", ...args: unknown[]) { log", "description": "Logs messages to console based on log level, supports debug, info, warn, and error.", "scope": "", "scopeKind": ""}, {"name": "async function remoteFetch<T>(path: string, init?: RequestInit): Promise<T> { remoteFetch", "description": "Performs fetch request to backend API or mock, handles responses and errors.", "scope": "", "scopeKind": ""}, {"name": "export async function listVideos(opts?: { categoryId?: string; limit?: number; offset?: number }/ listVideos", "description": "Fetches list of videos, either from mock or backend, with optional filtering options.", "scope": "", "scopeKind": ""}, {"name": "export async function getVideoById(id: string): Promise<Video | null> { getVideoById", "description": "Retrieves a specific video by its ID from mock or backend.", "scope": "", "scopeKind": ""}, {"name": "export async function searchVideos(query: string): Promise<Video[]> { searchVideos", "description": "Searches videos based on a query string.", "scope": "", "scopeKind": ""}, {"name": "export async function listByCategory(categoryId: string): Promise<Video[]> { listByCategory", "description": "Lists videos filtered by category ID.", "scope": "", "scopeKind": ""}, {"name": "export async function listByChannel(channelId: string): Promise<Video[]> { listByChannel", "description": "Lists videos filtered by channel ID.", "scope": "", "scopeKind": ""}, {"name": "export async function listRecommendations(videoId?: string, limit = 6): Promise<Video[]> { listRecommendations", "description": "Provides video recommendations based on a video ID, with a limit parameter.", "scope": "", "scopeKind": ""}, {"name": "export async function createVideo(payload: CreateVideoPayload): Promise<Video> { createVideo", "description": "Creates a new video entry, either in mock or backend.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "console.debug", "console.info", "console.warn", "console.error", "remoteFetch"], "search-terms": ["API client", "video functions", "fetch wrapper", "mock data toggle", "video retrieval", "create video"], "state": 2, "file_id": 18, "knowledge_revision": 72, "git_revision": "", "revision_history": [{"37": ""}, {"70": ""}, {"72": ""}], "ctags": [{"_type": "tag", "name": "BASE", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^const BASE = env(\"NEXT_PUBLIC_API_BASE\") || env(\"NEXT_PUBLIC_BACKEND_URL\");$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "FORCE_MOCK", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^const FORCE_MOCK = NODE_ENV_PUBLIC === \"mock\" || !BASE;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^const LOG_LEVEL = (env(\"NEXT_PUBLIC_LOG_LEVEL\") || \"warn\").toLowerCase();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "NODE_ENV_PUBLIC", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^const NODE_ENV_PUBLIC = (env(\"NEXT_PUBLIC_NODE_ENV\") || \"\").toLowerCase();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^    const c = console as Pick<Console, \"debug\" | \"info\" | \"warn\" | \"error\">;$/", "language": "TypeScript", "kind": "constant", "scope": "log", "scopeKind": "function"}, {"_type": "tag", "name": "createVideo", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function createVideo(payload: CreateVideoPayload): Promise<Video> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "currentIdx", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const currentIdx = order.indexOf(currentLevel);$/", "language": "TypeScript", "kind": "constant", "scope": "log", "scopeKind": "function"}, {"_type": "tag", "name": "currentLevel", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const currentLevel: Level = isLevel(LOG_LEVEL) ? (LOG_LEVEL as Level) : \"warn\";$/", "language": "TypeScript", "kind": "constant", "scope": "log", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^function env(name: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getVideoById", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function getVideoById(id: string): Promise<Video | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "isLevel", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const isLevel = (val: string): val is Level => (order as readonly string[]).includes(val);$/", "language": "TypeScript", "kind": "constant", "scope": "log", "scopeKind": "function"}, {"_type": "tag", "name": "listByCategory", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function listByCategory(categoryId: string): Promise<Video[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listByChannel", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function listByChannel(channelId: string): Promise<Video[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listRecommendations", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function listRecommendations(videoId?: string, limit = 6): Promise<Video[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listVideos", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function listVideos(opts?: { categoryId?: string; limit?: number; offset?: number }/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "log", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^function log(level: \"debug\" | \"info\" | \"warn\" | \"error\", ...args: unknown[]) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "lvlIdx", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const lvlIdx = order.indexOf(level);$/", "language": "TypeScript", "kind": "constant", "scope": "log", "scopeKind": "function"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const order = [\"debug\", \"info\", \"warn\", \"error\"] as const;$/", "language": "TypeScript", "kind": "constant", "scope": "log", "scopeKind": "function"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const params = new URLSearchParams();$/", "language": "TypeScript", "kind": "constant", "scope": "listRecommendations", "scopeKind": "function"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const params = new URLSearchParams();$/", "language": "TypeScript", "kind": "constant", "scope": "listVideos", "scopeKind": "function"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const params = new URLSearchParams({ categoryId });$/", "language": "TypeScript", "kind": "constant", "scope": "listByCategory", "scopeKind": "function"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const params = new URLSearchParams({ q: query });$/", "language": "TypeScript", "kind": "constant", "scope": "searchVideos", "scopeKind": "function"}, {"_type": "tag", "name": "remoteFetch", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^async function remoteFetch<T>(path: string, init?: RequestInit): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const res = await fetch(url, { ...init, headers: { \"Content-Type\": \"application\\/json\", ...(in/", "language": "TypeScript", "kind": "constant", "scope": "remoteFetch", "scopeKind": "function"}, {"_type": "tag", "name": "searchVideos", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^export async function searchVideos(query: string): Promise<Video[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "remoteFetch", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/videostream-platform-41115-41124/youtube_frontend/src/lib/api/client.ts", "pattern": "/^  const url = `${BASE?.replace(\\/\\\\\\/+$\\/, \"\")}\\/${path.replace(\\/^\\\\\\/+\\/, \"\")}`;$/", "language": "TypeScript", "kind": "constant", "scope": "remoteFetch", "scopeKind": "function"}], "hash": "86ddd9969dceddf26ddb324c913a4d71", "format-version": 4, "code-base-name": "youtube_frontend", "filename": "youtube_frontend/src/lib/api/client.ts"}